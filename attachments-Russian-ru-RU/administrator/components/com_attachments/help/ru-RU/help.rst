.. header:: 

    .. raw:: html

	<h1 class="title">Документация расширения Attachments (Вложения)</h1>

.. class:: version

**Версия 2.2 - Февраль 2011**

.. contents::
    :depth: 1

Введение
========

Расширение 'Вложения' (Attachments) для CMS Joomla! позволяет
загрузить файлы на сайт и прикрепить (attach) их к статье или
другому родителю. 'Вложения' включает в себя плагины для
отображения вложений и компонент для загрузки и управления
вложениями. Наряду с различными опциями, увеличивающими гибкость и
удобство использования, в расширении присутствуют опции контроля
того, кто может видеть вложения и кто может их загружать.
Замечание: все опции доступны через админ-панель 'Компоненты >
Вложения > Настойки'.  

**Это расширение работает только в системе Joomla! версии 1.5. Тестирование в системе Joomla! версии 1.6 еще не проводилось.**

Расширение 'Вложения' переведено на многие языки. См. раздел
`Переводы`_ чтобы увидеть список доступных
переводов. Многие из языковых пакетов находятся в процессе
обновления до версии 2.0.

Если вы хотите подписаться на рассылку обновлений этого расширения,
пожалуйста воспользуйтесь этой страницей:


* `Страница подписки на Email рассылку ( http://jmcameron.net/attachments/email-list.html ) <http://jmcameron.net/attachments/email-list.html>`_

Новые возможности версии 2.0
============================

* Возможно "присоединить" ссылку (так же как и файл) к родителю.
* Возможно отобразить вложения в любой части родителя.
* Добавлено поле в списке вложения, отображающее имя того, кто
  загрузил вложение
* Реализована функция мульти-инсталляции. Теперь для инсталляции
  всех частей расширения 'Вложения' достаточно выполнить инсталляцию
  одного архива (плагины включены автоматически). Данная функция
  позволяет максимально просто инсталлировать данное расширение хотя
  на данный момент в него входят один компонент и семь плагинов.
  Замечание: функция 'upgrade' Joomla! теперь является функцией по
  умолчанию для всех частей расширения 'Вложения'. Это позволяет
  отказаться от удаления более ранней версии расширения 'Вложения'
  перед установкой данной версии.
* Формат хранения вложений преобразован к формату::

      attachments/article/23/file.txt

  Это позволило устранить приставки у файлов вложений, используемые в
  более ранних версиях. Это не говорит о том, что таким образом можно
  избежать дублирования имен файлов вложения. На практике это не
  является значительным ограничением функциональности.
* Расширена функциональность плагинов расширения 'Вложения'.
  Теперь плагины позволяют присоединять файлы к содержанию типов,
  поддерживаемых плагином onPrepareContent. Например, возможно
  присоединить файлы к описаниям категорий и разделов. Разработчик
  расширения планирует создать плагин, позволяющий добавлять вложения
  к родителям типа Community Builder, персональная информация,
  описание товара магазина Virtuemart и т.д. Подробнее см. раздел
  `Какие файлы могут быть вложены?`_
* В админ панели:
      -  Возможно добавить вложение к статье в процессе ее создания
      -  Данная функция запрещает присоединять вложения к
         неопубликованным или удаленным статьям или родителям (однако
         сущесвует возможность их просмотреть).
      -  Добавлена фильтрация списка вложений
      -  Нажатие на шапке колонки позволяет выполнять сортировку по
         различным столбцам
      -  Добавлено несколько утилит
* Улучшена поддержка Unicode в именах файлов
* Расширена функциональность в части "Кто может видеть" и "Кто
  может обновлять".
* Устранена проблема с CSS стилями в случае инсталляции расширения
  при включенном кеше Joomla!


Ограничения на загрузку
=======================

Не все типы файлов могут быть загружены. Расширение 'Вложения' не
разрешит загрузить файлы, которые запрещены в Joomla! Медиа
Менеджере. Чтобы посмотреть (изменить) какие файлы разрешены -
войдите на страницу **Сайт > Настройки** и выберите вкладку
**Система**. В разделе *Мультимедиа* указано какие типы файлов и
какие MIME типы разрешены для загрузки. Расширение 'Вложения'
соблюдает эти ограничения. Однако запрет на 'Разрешенные расширения
изображений (типы файлов)' игнорируется.

Настройки
=========

Все настройки расширения управляются через менеджер компонента.
Чтобы изменить настройки откройте административную панель, выберите пункт меню
"Компоненты"->"Вложения". Нажмите кнопку "Настройки" справа вверху
на панели управления и вы увидите список параметров расширения. В
него входят следующие пункты:

* **Кто может видеть вложения?** Этот параметр управляет тем, кто
  может видеть ссылки на прикрепленные файлы. Существует три режима:
   
  1. '*Никто*' - если выбран этот режим, список вложений и ссылки для
     скачивания файлов НЕ будут видны обычному посетителю сайта
     независимо от того, зарегистрировался он или нет. При ограниченном
     доступе этот режим предотвращает возможность скачивать файлы с
     сайта. Исключением являются Администраторы, которые и в этом режиме
     могут видеть список вложений и имеют возможность скачивать файлы.
  2. '*Любой пользователь*' - если выбран этот режим, ссылки только
     зарегистрированные пользователи увидят ссылки на прикрепленные
     файлы.
  3. '*Любой*' - если выбран этот режим, ссылки на вложения будут
     видны любому посетителю сайта, независимо от того,
     зарегистрировался он или нет.

* **Кто может загружать вложения?** Этот параметр управляет тем,
  кто сможет загружать вложения к родителям. Существует четыре
  режима:
   
  1. '*Никто*' - если выбран этот режим, ссылка "Добавить вложение"
     для загрузки вложения на сайт НЕ видна обычному посетителю сайта
     независимо от того, зарегистрировался он или нет. При ограниченном
     доступе этот режим предотвращает возможность загружать файлы на
     сайт. Исключением являются Администраторы, которые и в этом режиме
     видят ссылку "Добавить вложение" и могут загружать файлы на сайт.
  2. '*Только автор*' - в этом режиме ссылка для загрузки и
     редактирования вложения видна только автору родителя (а также всем
     пользователям, имеющим более высокий уровень доступа -
     Редактор/Издатель/Администратор).
  3. '*Любой пользователь*' - ссылка для загрузки вложения видна
     только зарегистрированным пользователям.
  4. '*Редактор и выше*' - ссылка для загрузки вложения видна только
     пользователям, имеющим уровень доступа Редактор и выше.

* **Вложения опубликованы по умолчанию?** Это режим
  'автоматической публикации' устанавливает будут ли опубликованы по
  умолчанию вновь добавленные вложения. При установке 'Да' при
  добавлении вложения оно будет опубликовано немедленно и будет
  доступно пользователям. При установке 'Нет' новые вложения не будут
  опубликованы автоматически. Для публикации вложения необходимо
  зайти в административную панель и установить флажок опубликовано,
  что бы вложение появилось на сайте.
* **Предупреждение о публикации** Если режим автоматической
  публикации (см. предыдущий пункт) выключен, возможно вы захотите
  проинформировать пользователей как им опубликовать свои вложения.
  Здесь вы можете вставить соответствующий текст. Если это поле
  оставить пустым, будет отображаться стандартное системное сообщение
  предлагающее пользователю связаться с администратором для того что
  бы его новое вложение было опуликовано.
* **Показать заголовки?** Если установлено 'Да', будет добавлена
  строка над списком фaйлов вложения описывающая содержания колонок.
* **Показать описание вложения?** Данная опция определяет будет ли
  показано описание для каждого вложения.
* **Показать кто загрузил вложение?** Опция определят будет ли
  показано имя пользователя, загрузившего вложение.
* **Показать размер файла вложения?** Опция определят будет ли
  показан размер файла вложения в списке вложений.
* **Показать количество скачиваний?** Опция определят будет ли
  показано количество скачиваний в списке вложений.

  .. warning:: Эта опция работает только при ограниченном доступе! В обычном
     режиме файлы вложений обрабатываются как статические файлы и доступ к ним
     осуществляется напрямую без прохождения через код Joomla!  Поэтому
     невозможно подсчитать количество скачиваний файла в таком режиме. Таким
     образом эта опция будет работать только если выставлено значение 'Да'
     здесь, а также в пункте "Ограниченный доступ скачивания".
* **Показать дату изменения файла?** Если опция установлена 'Да',
  тогда в списке вложений появится время модификации каждого файла.
  Если 'Нет', времени модификации не будет отображено.
* **Формат представления даты** Вы можете указать формат
  отображения времени модификации используя тот же формат, что и в
  функции PHP strftime(). Примеры можно найти в интернете по запросу
  'PHP strftime'. По умолчанию формат установлен (%x %H:%M), что дает
  24 часовой формат вида: 4/28/2008 14:21. Чтобы избавиться от
  времени суток удалите часть содержащую "%H:%M". Учтите что
  реализации PHP под Windows и Linux системами могут отличаться.
* **Порядок файлов вложения** Опция позволять выбрать порядок
  расположения файлов во вложении. Большинство опций очевидны:
  
  1.  '*Имя файла*' - в данном режиме файлы вложения расположены в
      алфавитном порядке имен файлов.
  2.  '*Размер файла (наименьший первый)*'
  3.  '*Размер файла (наибольший первый)*'
  4.  '*Описание*'
  5.  '*Показать имя файла или ссылку*' - Все вложения, у которых
      имена файлов отображаются пустыми, будут расположены выше файлов, у
      которых имена файлов отображаются и расположены в алфавитном
      порядке имен файлов.
  6.  '*Кто загрузил*' - сортировка по имени пользователя,
      загрузившего вложение.
  7.  '*Дата создания (старейший первый)*'
  8.  '*Дата создания (новейший первый)*'
  9.  '*Дата изменения (старейший первый)*'
  10. '*Дата изменения (новейший первый)*'
  11. '*ID вложения*' - в данном режиме файлы вложения расположены в
      порядке увеличения ID файла вложения. Данная сортировка аналогична
      сортировке 'Дата создания (старейший первый)'.
  12. '*Поле 1*'
  13. '*Поле 2*'
  14. '*Поле 3*'

* **Имя поле 1-3:** Если у вас есть дополнительная информация о
  каждом из вложений и вы хотите ее опубликовать, то расширение
  позволяет вам определить до 3-х полей с такой информацией. Чтобы
  создать новое дополнительное поле введите его имя в одной из трех
  областей ввода. Очистите область ввода чтобы отключить
  редактирование и отображение этого поля. Поля, определенные
  пользователем, будут отображаться в том же порядке, что и здесь.
  Максимальная длинна каждого поля ограничена 40 символами. Общая
  длина не должна превышать 100 символов.

* **Максимальная длина имени файла или ссылки** Максимальная длина
  имени файла или ссылки в списке вложения. Имена файла или ссылки
  длиннее установленного ограничения будут усечены и помещены в поле
  'display filename' (только для отображения, реальное имя файла или
  ссылка останутся без изменения). Значение 0 означает отсутствие
  ограничений на длину за исключением ограничения бызы данных. Оно
  состовляет 80 символов. Примечание: эта опция воздействует только
  имена вложений, добавленных после установки этой опции.

* **Куда поместить вложения?** Данная опция управляет
  расположением вложения в определенном месте поддерживаемого
  родителя. Имеются следующие режимы:
     
      - '*В начале*'
      - '*В конце*'
      - '*Пользовательское расположение*' - в данном режиме список
        вложений будет расположен в тексте родителя, где будет помещен тег:
        {attachments}. **ПРИМЕЧАНИЕ:** Для любого родителя, в котором нет
        этого тега, список вложений будет размещен в конце статьи (или
        содержания).
      - '*Неактивный (фильтр)*' - данный режим запрещает отображение
        списка вложений и подавляет отображение любого тега {attachments},
        расположенного в родителе.
      - '*Неактивный (без фильтра)*' - данный режим запрещает
        отображение списка вложений и НЕ подавляет отображение любого тега
        {attachments}, расположенного в родителе.

* **CSS стиль для таблицы вложений** Чтобы перезаписать CSS стили
  списков вложения укажите здесь имя вашего стиля. По умолчанию имя стиля -
  'attachmentsList'. См. раздел `CSS стили списка вложений`_ для более
  подробной информации.
* **Ссылка для регистрации** Если необходима ссылка
  перенаправления нового пользователя на регистрацию введите ее в
  данное поле. Данная функция полезна в случае если существует
  страница регистрации.
* **Режим открытия ссылки** Опция определяет как открывается
  ссылка на файл. 'В том же окне' означает что ссылка будет открыта в
  том же окне браузера. 'В новом окне' - ссылка будет открыта в новом
  окне. В некоторых браузерах режим 'В новом окне' открывает ссылку в
  новой закладке. Это зависит от настроек самого браузера.
* **Подкаталог для загрузок** Расширение 'Вложения' помещает
  загружаемые файлы в подкаталог основного каталога сайта. По
  умолчанию это подкаталог 'attachments'. ПРИМЕЧАНИЕ: при изменении
  подкаталога загрузки новая установка действует только на загрузки,
  выполненные после установки опции. Загрузки, выполненные до
  изменения подкаталога, остаются в старом подкаталоге и записи базы
  данных будут по прежнему на них ссылаться. Для перемещения файлов
  из старого в новый подкаталог необходимо переместить файлы а затем
  обновить ссылки на них в базе данных вручную.
* **Заголовок пользователя для списка вложений** По умолчанию
  расширение 'Вложения' вставляет заголовок "Вложения:" поверх списка
  вложений родителя (если он имеет прикрепленные файлы). В некоторых
  случаях вам возможно захочется использовать особый заголовок для
  некоторых вложений. Вы можетет указать особый заголовок для
  кокретного вложения. Например, если вы хотите чтобы статья 211
  имела вложение с заголовком "Загрузки:", тогда добавьте следующий
  текст: '211 Загрузки:' (без кавычек). Используйте по одному
  заголовку на строчку. Для других типов родителей используйте
  формат: 'категория:23 Заголовок для категории 23' где 'категория'
  необходимо заменить именем соответствующего родителя. Например для
  статьи 211, описанной выше, необходимо 'статья:211 Загрузки:'.
  Заметим что наличие имени (типа) и отсутствие ID приведет к
  изменению заголовка для всех родителей данного типа. Это удобный
  способ изменить глобальный заголовок вложений и затем определить
  необходимые заголовки.

  Замечание: Если вы хотите заголовок для всех списков вложений
  глобально, вы можете отредактировать вхождения 'ATTACHMENTS TITLE'
  в файлах перевода::

      administrator/language/qq-QQ/qq-QQ.plg_frontend_attachments.ini

  где qq-QQ является инфобозначением кода языка, например en-GB для
  английского или ru-RU для русского языка. (Если вы не знакомы с
  файлами перевода Joomla!, то просто найдите строку, содержащую
  'ATTACHMENTS TITLE' в левой части перед знаком '=', напишите то что
  вы считаете нужным для отображения в правой части после знака '=' и
  ничего не меняйте в левой).
* **Скрыть вложения для** Разделеный запятой список ключевых слов
  или Разделов/Категорий тех статей в которых список вложений будет
  скрыт. Могут применяться пять ключевых слов: 'frontpage' чтобы
  спрятать вложения на главной странице, 'blog' чтобы спрятать
  вложения на страницах, использующих оформление 'blog',
  'all_but_article_views' чтобы разрешить видеть вложения только
  при просмотре статей, 'always_show_section_attachments' чтобы
  разрешить видеть вложения к разделам при одновременной установке
  'all_but_article_views' и 'always_show_category_attachments'
  чтобы разрешить видеть вложения к категориям при одновременной
  установке 'all_but_article_views' (ключевое слово вводится без
  кавычек).
  **Ключевое слово 'frontpage' влияет на все типы родителей, остальные - если родители отличны от статей, разделов и категорий могут воспринимать а могут нет опцию 'all_but_article_views' и другие.**
  Идентификаторы статей, разделов/категорий необходимо вводить как
  соответствующие числа, разделенные слешем(/):
  РазделНомер/КатегорияНомер, РазделНомер/КатегорияНомер. Чтобы
  указать все категории внутри одного раздела необходимо указать
  только номер раздела. Примеры: 23/10, 23/11, 24

* **Время ожидания ответа** Время ожидания ответа при проверке
  ссылки (секунд). В случае добавления ссылки как вложения она
  проверяется (существует возможность отменить проверку). Если доступ
  по ссылке получен ранее установленного времени ожидания,
  определяются размер файла и другая информация о ссылке, если нет,
  используется общая информация. Установка 0 отключает функцию.

* **Совмещение иконок ссылки и файла** Совмещение иконки ссылки и
  иконки файла вложения чтобы отобразить ссылку. Корректные ссылки
  отображаются со стрелкой, некорректные - отмечены красной линией
  вокруг иконки типа файла (от низ-слева до верх-справа).

* **Удаление устаревших вложений (админ панель)** Установка по
  умолчанию для удаления *устаревших* вложений через админ панель.
  Под *устаревшими* подразумеваются вложения к неопубликованным или
  удаленным родителям. Возможно переопределить эту установку
  используя опцию 'Список файлов вложения:', выпадающее меню справа
  над списком вложений (на одной линии с фильтром). При использовании
  данного меню, система помнит выбранную установку пока администратор
  не выйдет из системы. По этой причине данная установка может не
  навать никакого эффекта. Установка данной опции вступает в силу при
  следующем входе администратора в систему.

* **Ограниченный доступ** По умолчанию расширение 'Вложения'
  сохраняет загружаемые файлы в общедоступный каталог. Если вы
  укажете значение 'Да', то каталог в который загружаются файлы
  перестанет быть общедоступным. Ссылки на прикрепленные файлы будут
  работать, но они перестанут быть прямыми. Это позволит исключить
  доступ к файлам пользователей, не вошедших на сайт.
  Если выбрано значение 'Нет', файлы будут доступны по полному URL 
  адресу всем, в том числе и не находящимся на сайте.
  Таким образом эта опция предотвращает доступ к файлам посторонних
  лиц, даже если они знают полный URL адрес файла. Так же активируйте 
  эту опцию, в случае проблем при открытии скачанных файлов, с именами
  файлов в региональных алфавитах (Win сервера).

* **Список файлов вложения при ограниченном доступе** Список
  файлов вложения при ограниченном доступе даже когда пользователь не
  идентифицирован и выбран режим 'Никто' настройки 'Кто может видеть
  вложения'. Опция 'Кто может видеть вложения' тем не менее
  контролирует возможность скачивать вложения даже при ограниченном
  доступе. Эта опция функционирует только при ограниченном доступе.

* **Режим ограниченного доступа** Эта опция определяет должны ли
  прикрепленные файлы при скачивании открываться как отдельные файлы
  или же браузер должен пытаться сам отобразить их внутри страницы.
  (если он может обрабатывать такой тип файлов). Существует два
  режима:

     - *'inline'* - в этом режиме, файлы которые могут быть отображены
        браузером будут им отображаться (так же как текст или картинки).
     - *'Вложение'* - в этом режиме файлы всегда будут скачиваться на сторону
        клиента как отдельные файлы.

   В любом случае файлы, которые не могут быть отображены в браузере,
   будут скачиваться как внешние файлы.


Отображение имен файлов или ссылок
==================================

Обычно, когда файлы загружены (или ссылки добавлены) и отображаются
в списке вложений, полное имя файла (или ссылка) используется как
ссылка для скачивания. В некоторых случаях имена файлов (или
ссылок) могут быть слишком длинными. В форме загрузки файла есть
специальное поле "Отображать имя файла или ссылку" в котором
возможно указать имя файла (ссылки) или метку, которые будут
отображаться вместо полного имени файла (или ссылки). Например
здесь может быть указана аббревиатура имени файла. Это поле может
быть изменено через админ панель при редактировании вложения.
Замечание: Среди опций разширения опция "Максимальная длина имени
файла или ссылки". Она может автоматически обрезать имя файла и
записывать его в поле "Показать имя файла:".

Вложение ссылок
===============

Новая возможность расширения 'Вложения' версии 2.0 это возможнось
"присоединять" ссылки к родителю. При нажатии ссылки "Добавить
вложение" открывается диалоговое окно, где существует кнопка
"Ввести ссылку вместо". При нажатии будет доступно поле для ввода
ссылки и две опции:

*  **Проверить существование ссылки?** - при выборе опции происходит
     определение типа файла (определение соответствующей иконки),
     запрашивается информация о файле с сервера - тип файла и его
     размер. Иногда сервер не отвечает на запросы даже при указании правильной
     ссылки. По умолчанию расширение 'Вложения' считает ссылку неправильной
     пока обратное не будет подтверждено сервером. В случае если вы уверены,
     что ссылка правильная, необходимо снять отметку с данной опции. Тогда
     данная ссылка будет считаться правильной но это не гарантирует того, что
     тип файла или его размер будут совпадать с реальными. Заметим, что запрос
     с сервера будет выполняться независимо от тог, выбрана данная опция или
     нет.

*  **Относительная ссылка?** - Обычно ссылка вводится в виде 'http...' для
     указания полного пути к файлу. Если есть необходимость указывать
     относительный путь к файлам/командам сайта используйте данную опцию.

Ссылки на файлы показаны соответствующими иконками со стрелкой (что
указывает на корректную ссылку) или перечеркнуты красной
диагональной линией (что указывает на некорректную ссылку). При
редактировании ссылки ее правильность возможно определять по
возникающим отметкам (стрелки или красная линия). Отметим что эти
отметки могут не отображаться при установке режима 'Нет' опции
настроек **Совмещение иконок ссылки и файла**. В расширение
встроено несколько утилит, связанных с обработкой ссылок (и файлов)
и доступных в админ панели через кнопку "Утилиты" панели управления
расширения.

Какие файлы могут быть вложены?
===============================

Кроме возможности присоединять файлы или ссылки к статьям, теперь
появилась возможность присоединять файлы или ссылки к другим
родителям, таким как Разделы и Категории (см. ниже). Если
установлены и активны соответствующие плагины расширения
'Вложения', тогда возможно присоединять файлы или ссылки к таким
типам контента как информация о пользователе, описание товара в
интернет-магазине и т.д. В сущности, любой контент, который
отображается на сайте и в котором возможно происхождение события
'onPrepareContent', может быть родителем вложения (при установке
соответствующего плагина к расширению 'Вложения'). Контент сайта,
вызывающий события, обычно содержит информацию для отображения
(статьи) или имеет описание, которое также должно быть отображено
на сайте.

Вложение файлов или ссылок к описаниям разделов или категорий
-------------------------------------------------------------

Начиная с версии 2.0 пользователи могут присоединять файлы или
ссылки к описанию раздела и категории. Обычно эти описания
отображаются на страницах раздалов или категорий в режиме блога
если параметр 'Описание' установлен в режим *Показать* (см. меню
'Меню'). Отметим, что невозможно присоединить файлы или ссылки к
описанию Раздела или Категории в режиме редактирования раздела или
категории. Присоединить файлы возможно только через админ панель
("Компоненты" -> "Вложения") или непосредственно загрузить на
сайт.

Если вы хотите узнать больше о разработке плагинов для расширения
'Вложения', документация доступна по данной ссылке как часть
инсталляционного пакета расширения 'Вложения':


* `Документация по разработке плагинов для расширения 'Вложения' 
  <../en-GB/plugin_manual/html/index.html>`_ (по-английски)

CSS стили списка вложений
=========================

Список вложений на сайте строится при помощи специального тега 'div', который
содержит таблицы вложений. Таблица имеет несколько разных CSS классов,
связанных с ней, чтобы дать разработчику сайта возможность изменять внешний
вид таблицы. Посмотрите CSS файл в плагине вложения
(plugins/content/attachments.css) для примера.  Если вы хотите сменить стиль,
скопируйте оригинальные стили в конец файла и переименуйте скопированную
секцию 'attachmentsList' дав ей новое название. Откройте настройки компонента
'Вложения' (Компоненты => Вложения) и измените *CSS стиль для таблицы
вложений* на новое название класса. Далeе соответствующим образом измените
определения класса в новой секции файла стилей. Такой подход позволит легко
вернуться к первоначальному стилю, просто изменив параметр *CSS стиль для
таблицы вложений* на значение по умолчанию 'attachmentsList'. Кроме того
секция с изменненым стилем может быть легко скопирована в отдельный файл и
затем легко добавлена заново, когда вы перейдете на новую версию
расширения. Это можно сделать командой CSS @import.

Иконки типов файлов
===================

Расширение 'Вложения' отображает иконку перед каждым вложением в списке
вложений. Если необходимо добавить новый тип иконки следуйте указаным шагам:
(1) Добавьте соответствующую иконку в каталог 'media/attachments/icons' если
её там нет. (2) Отредактируйте файл
'components/com_attachments/file_types.php' добавив соответствующую строку в
статический массив $attachments_icon_from_file_extension, который связывает
расширение файла с именем файла иконки (в каталоге
media/attachments/icons). Если это не сработало - значит еще необходимо
добавить соответствующую строку в массив $attachments_icon_from_mime_type. (3)
Не забудьте сохранить ваши файлы иконок и измененный файл file_types.php,
перед тем как обновлять версию расширения.

Переводы
========

Это расширение обеспечивает возможности для перевода и поддерживает
следующие языки (помимо английского). Многие из языковых пакетов
находятся в процессе обновления до версии 2.0:

* **Болгарский (Bulgarian):** перевод Stefan Ilivanov
* **Венгерский (Hungarian):** Формальный и неформальный переводы  Szabolcs Gáspár
* **Греческий (Greek):** перевод Harry Nakos
* **Испанский (Spanish):** перевод Carlos Alfaro (1.3.4) и Manuel María Pérez Ayala (2.0)
* **Итальянский (Italian):** перевод Lemminkainen и Alessandro Bianchi
* **Каталанский (Catalan):** перевод Jaume Jorba
* **Китайский (Chinese):** Традиционный и упрощенный китайские
  переводы baijianpeng (http://www.joomlagate.com)
* **Немецкий (German):** перевод Michael Scherer
* **Нидерландский (Dutch):** перевод Parvus (версии 1.3.4 и 2.0)
* **Норвежский (Norwegian):** перевод Espen Gjelsvik
* **Персидский (Persian):** перевод Hossein Moradgholi и Mahmood Amintoosi
* **Польский (Polish):** перевод Piotr Wójcik
* **Португальский/Бразильский (Portuguese/Brazilian):** перевод Arnaldo Giacomitti и Cauan Cabral
* **Португальский/Португальский (Portuguese/Portugal):** перевод
  Bruno Moreira (1.3.4) и José Paulo Tavares (2.0)
* **Румынский (Romanian):** перевод Alex Cojocaru
* **Русский (Russian):** перевод Евгений Панчев (Yarik Sharoiko) (1.3.4) и Сергей Литвинцев (Sergey Litvintsev) (2.0)
* **Сербский (Serbian):** перевод Vlada Jerkovic
* **Словацкий (Slovak):** перевод Miroslav Bystriansky
* **Финский (Finnish):** перевод Tapani Lehtonen
* **Французский (French):** перевод Pascal Adalian
* **Хорватский (Croatian):** перевод Tanja Dragisic
* **Чешский (Czech):** перевод Tomas Udrzal
* **Шведский (Swedish):** перевод Mats Elfström

Большое спасибо всем переводчикам! Если вы хотите помочь с
переводом расширения на другие языки, пожалуйста свяжитесь с
автором (см. раздел `Контакты <#contact>`_ в конце).

Предупреждения
==============

* **Если у вас есть вложения личного характера, то используйте опцию
  'Ограниченный доступ скачивания'** Если вы не используете эту опцию, файлы
  вложений сохраняются в общедоступном каталоге и доступны для всех, кто
  знает полную ссылку к файлу. Опция *ограниченного доступа* предотвращает
  доступ без определенных прав. Смотрите описание опции *Ограниченный доступ
  скачивания* для большего понимания.

* Каждый раз когда файл загружается на сервер, проверяется
  существование каталога и если он отсутствует, то будет создан. По
  умолчанию каталог для загрузки это 'attachments' в корневом
  каталоге веб сайта. Это имя можно изменить через опцию 'Подкаталог
  для загрузок'. Если расширению не удается создать этот каталог вы
  должны создать его сами, иначе могут возникнуть проблемы с
  загрузкой файлов. Убедитесь что вы указали необходимые права. В
  мире Unix/Linux это скорее всего 775. Внимание, процесс создания
  каталога для загрузки может не удасться, если настройки вашего
  сервера (или PHP) запрещают создавать подкаталоги. Возможно вам
  прийдется времено убрать эти ограничения.

* Если вам не удается загружать файлы определенного типа (например
  zip архивы), помните что раширение использует ограничения,
  накладываемые медиа менеджером. Это сделано, чтобы не загрузить
  потенциально опасные файлы такие как \*.php или \*.html.
  Администратор может изменить настройки медиа менеджера, чтобы
  добавить требуемый тип файлов. (Путь: Сайт > Настройки > закладка
  Система > раздел Мультимедиа).

* Если вы не видите вложений, этому может быть несколько причин:
      -  Вложение не опубликовано. Необходимо опубликовать вложение через
         админ панель расширения.
      -  Родитель вложения не опубликован.
      -  Опция 'Кто может видеть вложения?' установлена в режим 'любой
         пользователь' а вы не зарегистрировались или выбран режим 'Никто'
         этой опции. Необходимо изменить соответствующие настройки
         расширения.
      -  Плагин 'Content - Attachments' не включен. Воспользуйтесь
         менеджером плагинов, чтобы его включить.
      -  Опция плагина 'Content - Attachments' 'Уровень доступа'
         установлена в режим не 'Общий'.

* Если вы столкнулись с ограничением на размер загружаемого файла
  попробуйте добавить следующие строчки в файл .htaccess в корне
  вашего сайта::

      php_value upload_max_filesize 32M
      php_value post_max_size 32M

  где значение 32M (мегабайта) заменить на необходимое значение в
  качестве ограничения максимального размера загружаемых файлов.

* С версии 2.0 расширение 'Вложения' поддерживает "вложениеg"
  ссылок. Если сайт расположен на компьютере с ОС Windows Vista и
  возникли проблемы при присоединении ссылки, связанные с localhost,
  это известная проблема связанная с конфликтом IPv4 и IPv6. Для
  решения этой проблемы необходимо отредактировать файл::

      C:\Windows\System32\drivers\etc\hosts

  Закомментировать строку, содержащую ::1. Отметим, что файл hosts
  это скрытый файл. Для его редактирования необходимо изменить
  настройки отображения каталога чтобы отобразить скрытые файлы.

* В случае присоединения файла при редактировании статьи в
  редакторе, никакого сообщения о том, что файл присоединен, не
  появляется, однако вложение файла происходит. Вложения будут
  отражены сразу же, как только статья будет сохранена.

* С версии 2.0 расширение 'Вложения' поддерживает вложение файлов
  к статьям при их создании в редакторе статей. При этом существует
  ограничение: новые вложения после их загрузки и до сохранения
  статьи первый раз находятся в состоянии 'limbo'. Во время этого
  состояния (которое желательно делать максимально коротким) новые
  вложения идентифициются только по ID пользователя. Следовательно,
  если более чем один пользователь используют одну и ту же
  пользовательскую запись и они создают статьи в одно и то же время и
  добавляют вложения, то нет никакой гарантии что файлы вложений
  будут присоединены к тем статьям, к которым планировались
  вложения.
* Если вы столкнулись с некорректным открытием файла после скачивания,
  а имя файла задано в региональном алфавите, то включите опцию
  "Ограниченный доступ". Она позволит корректно загружать и скачивать 
  файлы, в названиях которых используются региональные алфавиты. 
  Данная проблема характерная при размещении сайта на Win серверах.

* Существует форум помощи и форум Часто Задаваемых Вопросов о
  расширении 'Вложения' на сайте Joomlacode, (joomlacode.org). Если
  вы обнаружили проблему, не описанную в данном файле помощи,
  пожалуйста проконсультируйтесь на форумах:

    - `Форум ВЛОЖЕНИЯ на http://joomlacode.org/gf/project/attachments/forum/ 
      <http://joomlacode.org/gf/project/attachments/forum/>`_


Обновление
==========

Обновление расширения стало значительно проще. Просто
проинсталлируйте новую версию 'Вложения'.

* *[Этот шаг не обязателен, но лучше его выполнить, чтобы точно иметь
  копию базы данных вложений, в случае если что-то пойдет не так.]*
  Воспользуйтесь `phpMyAdmin <http://www.phpmyadmin.net/home_page/index.php>`_
  (или другим инструментом редакторивония SQL) чтобы сохранить содержимое
  таблицы jos_attachments (опция 'Экспорт' [Export] с 'Полными' ['Complete']
  вставками данных, (не 'Расширенными' ['Extended'] вставками). Также
  необходимо сохранить загруженные файлы (обычно каталог 'attachments')
* **Нет необходимости удалять предыдущую версию расширения.**
  Данная функция протестирована начиная с версии 1.3.4.
* Для сохранения существующих вложений нет необходимости что-либо
  делать. Достаточно проинсталлировать новую версию расширения. При
  этом необходимые обновления произойдут автоматически.
* Если существующие вложения не планируется сохранять, необходимо
  вначале их удалить через админ панель.
* Функция мульти-инсталляции установит все необходимые компоненты
  и плагины и включит все плагины. Если необходимо, чтобы какой-либо
  плагин был выключен, вначале выполните инсталляцию а затем
  выключите необходимые планигы.

Благодарности
=============

Большое спасибо людям и ресурсам внесшим большой вклад в проект:

* Книга Джозефа Л. ЛеБланк  *Изучение разработки расширений 
  Joomla! 1.5: Создание Модулей, Компонент, и Плагинов на PHP*
  была очень полезна при написании расширения 'Вложения'
  ('Attachments').
* Иконки для типов файлов были получены из нескольких источников, включая:
     - `Шелковые иконки Марка Джаймса [Mark James] (http://www.famfamfam.com/lab/icons/silk/) <http://www.famfamfam.com/lab/icons/silk/>`_
     - `Иконки типов файлов 1.2 Джона Зайцева [John Zaitseff] (http://www.zap.org.au/documents/icons/file-icons/sample.html) <http://www.zap.org.au/documents/icons/file-icons/sample.html>`_
     - `Doctype иконки 2 Тимоти Грувс [Timothy Groves] (http://www.brandspankingnew.net/archive/2006/06/doctype_icons_2.html) <http://www.brandspankingnew.net/archive/2006/06/doctype_icons_2.html>`_
     - `Иконки OpenDocument Кена Барона [Ken Baron] (http://eis.bris.ac.uk/~cckhrb/webdev/) <http://eis.bris.ac.uk/~cckhrb/webdev/>`_
     - `Пакет Сладостей от Джозефа Норта [Joseph North] (http://sweetie.sublink.ca) <http://sweetie.sublink.ca>`_

  Замечание: большинство иконок 'Вложения' ['Attachments'] отличаются
  от аналогичных на этих сайтах. Если вы хотите получить оригинальные
  версии, пожалуйста загрузите их с этих веб сайтов.
* Большое спасибо Paul McDermott за огромную помощь в плагине
  поиска!
* Большое спасибо Mohammad Samini за предоставленный код PHP и CSS
  файлы для улучшения расширения 'Вложения' при отображении
  использовании языков, использующих написание справа-налево.
* Большое спасибо Florian Tobias Huber за решение проблемы
  отображения вложений при включенном кеше.
* Большое спасибо Manuel María Pérez Ayala за советы по созданию
  интегрированного мульти-инсталлятора. Мульти-инсталлятор использует
  функции API инсталлятора Joomla для автоматической инсталляции
  компонента и всех плагинов за один шаг. По-моему данная технология
  является оригинальной разработкой JFusion.
* Большое спасибо Ewout Weirda за полезную и дисскуссию и советы
  при разработке расширения 'Вложения'.


Контакты
========

Пожалуйста сообщайте об замеченных ошибках и предложениях по адресу
`jmcameron@jmcameron.net <mailto:jmcameron@jmcameron.net>`_
